<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./css/index.css">
    <script src="https://kit.fontawesome.com/8a2d33e15d.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div>
            <h1 class="logo">
                <a href="/index.html">
                    <img src="./img/icon/logoTxt.svg">
                </a>
            </h1>
            <ul class="gnb" id="gnb">
                <li><a href="#section-01" class="selected">HOME</a></li>
                <li><a href="#section-02">INTRO</a></li>
                <li><a href="#section-03">HELP</a></li>
            </ul>
        </div>
    </header>

    <main>
        <section class="section-01 home scroll">
            <div class="content-wrap">
                <img src="./img/icon/logo.svg">
                <div class="bar"></div>
                <div>
                    <div class="content-title">
                        TypingRoom
                    </div>
                    <button class="startBtn" id="btnStart"  onclick="location.href='main.html?map=normal'">
                        START
                    </button>
                </div>
              
            </div>

        </section>
        <section class="section-02 intro scroll">
            <div class="blue"></div>
            <div class="content-wrap">
                <div class="img-slider">
                    <div class="slide active">
                        <img src="./img/background/베이스.png" alt="">
                        <div class="info">
                            <h2>NORMAL ROOM</h2>
                            <p>asdasd</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="./img/background/indexBackground.png" alt="">
                        <div class="info">
                            <h2>11111 ROOM</h2>
                            <p>11111</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="./img/background/indexBackgroundBaseImg.jpg" alt="">
                        <div class="info">
                            <h2>22222 ROOM</h2>
                            <p>22222</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="./img/background/black.jpg" alt="">
                        <div class="info">
                            <h2>33333 ROOM</h2>
                            <p>33333</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="./img/background/green.jpg" alt="">
                        <div class="info">
                            <h2>44444 ROOM</h2>
                            <p>44444</p>
                        </div>
                    </div>
                    <div class="navigation">
                        <div class="btn active"></div>
                        <div class="btn"></div>
                        <div class="btn"></div>
                        <div class="btn"></div>
                        <div class="btn"></div>
                    </div>
                </div>
            </div>
        </section>

        <script>
            let slides = document.querySelectorAll(".slide");
            let btns = document.querySelectorAll(".btn");
            let currentSlide = 1;

            // active
            let manualNav = (manual) => {
                slides.forEach((slide) => {
                    slide.classList.remove('active');

                    btns.forEach((btn) => {
                        btn.classList.remove('active');
                    })
                })

                slides[manual].classList.add('active');
                btns[manual].classList.add('active');
            }

            // 버튼클릭 이벤트
            btns.forEach((btn, i) => {
                btn.addEventListener('click', (e) => {
                    manualNav(i);
                    currentSlide = i;
                })
            })

            // 자동으로 슬라이드 넘기기
            let repeat = (activeClass) => {
                let active = document.getElementsByClassName('active');
                let i = 1;

                let repeater = () => {
                    setTimeout(() => {
                        [...active].forEach((activeSlide) => {
                            activeSlide.classList.remove('active');
                        })

                        slides[i].classList.add('active');
                        btns[i].classList.add('active');
                        i++;

                        if(slides.length == i){
                            i = 0;
                        }
                        if(i > slides.length){
                            return 
                        }
                        repeater();
                    }, 10000);
                }
                repeater();
            }
            repeat();
        </script>

        <section class="section-03 help scroll">
            <div class="red"></div>


        </section>
    </main>

    <footer>
        <div class="footer-content">
            <ul class="socials">
                <li><a href="https://www.github.com/ihatelua"><i class="fa-brands fa-github"></i></a></li>
                <li><a href="mailto:ponyosushi@gmail.com"><i class="fa-brands fa-google"></i></a></li>
                <li><a href="https://www.figma.com/file/IRza4GUK4h7M3svpVcheXd/Untitled?node-id=18%3A2491"><i class="fa-brands fa-figma"></i></a></li>
            </ul>
        </div>
        <div class="footer-bottom">
            <p>copyright & &copy; 2022 TypingRoom. designed by<span> ihatelua</span></p>
        </div>
    </footer>
</body>
<script>
    // 메뉴선택시 스크롤
    let sections = document.getElementsByClassName("gnb")[0].children;
    for(let i = 0; i < sections.length; i++){
        let section = sections[i].firstChild;
        section.addEventListener('click', (e) => {
            let target = e.target;

            // selected 변경
            if(document.getElementsByClassName("selected")[0] != 'undefined'){
                document.getElementsByClassName("selected")[0].className = ""
            }
            e.target.className = "selected"

            // 스크롤 이동
            let href = target.attributes.href.value.substr(1);
            let offset = document.getElementsByClassName(href)[0].offsetTop
            window.scrollTo({top: offset-100, behavior: 'smooth'});
        });
    }

    // 스크롤시 메뉴선택
    window.addEventListener("scroll", () => {
        let scrollY = window.scrollY;
        let scrolls = document.getElementsByClassName("scroll");
        let sections = document.getElementsByClassName("gnb")[0].children;
        for(let i = 0; i < scrolls.length; i++){
            let offsetTop = document.getElementsByClassName("scroll")[i].offsetTop;
            if(offsetTop-150 <= scrollY){
                if(document.getElementsByClassName("selected")[0] != 'undefined'){
                    document.getElementsByClassName("selected")[0].className = ""
                }
                sections[i].firstChild.className = "selected";
            }
        }
    });
</script>
</html>